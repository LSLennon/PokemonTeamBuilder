@page "/DatabaseBuilder"
@inject PokemonApiService PokeApi
@inject PokemonServices PokeServices

<MudButton Variant="Variant.Filled"
           Color="Color.Primary"
           Class="ml-auto"
           Disabled=true
           OnClick="AddTypes">
    AddTypes
</MudButton>

<MudButton Variant="Variant.Filled"
           Color="Color.Primary"
           Class="ml-auto"
           Disabled=true
           OnClick="AddTypeEffectivness">
    AddTypeEffectivness
</MudButton>


@code {
    private async Task AddTypes()
    {
        List<AttackType> TypesBeingAdded = await PokeApi.AddTypeNames();
        await PokeServices.AddTypeAsync(TypesBeingAdded);
    }

    private async Task AddTypeEffectivness()
    {
        List<AttackType> allTypes =  await PokeServices.GetTypeList();
        List<TypeEffectiveness> typeEffectivenesses = await PokeApi.GetEffectiveness(allTypes);
        foreach(var i in typeEffectivenesses)
        {
            await PokeServices.AddTypeEffectivness(i);
        }
    }
}
